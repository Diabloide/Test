<!DOCTYPE html>
<html lang="ru">
<head>
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3f51b5">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta charset="UTF-8">
  <link rel="icon" href="/icons/icons-192png.png">
  <link rel="apple-touch-icon" href="/icons/icons-192png.png">
  <title>–†–µ–∑—É–ª—å—Ç–∞—Ç</title>
  <style>
    body {
      display: flex;               /* –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–ª–µ–∫—Å–±–æ–∫—Å */
      justify-content: center;    /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
      align-items: center;        /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
      height: 100vh;              /* –ü–æ–ª–Ω–∞—è –≤—ã—Å–æ—Ç–∞ —ç–∫—Ä–∞–Ω–∞ */
      margin: 0;
      background-color: #f0f0f0;  /* –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π —Ñ–æ–Ω */
      font-family: sans-serif;
    }

    #result {
      font-size: 36px;            /* –ö—Ä—É–ø–Ω—ã–π —à—Ä–∏—Ñ—Ç */
      font-weight: bold;
      text-align: center;
    }
  </style>
</head>
<body>
<script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js').then(reg => {
        reg.onupdatefound = () => {
          const newWorker = reg.installing;
          newWorker.onstatechange = () => {
            if (newWorker.state === 'installed') {
              if (navigator.serviceWorker.controller) {
                // –ù–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å-–≤–æ—Ä–∫–µ—Ä –≥–æ—Ç–æ–≤, —É–≤–µ–¥–æ–º–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                if (confirm("–î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–±–Ω–æ–≤–∏—Ç—å —Å–µ–π—á–∞—Å?")) {
                  newWorker.postMessage('skipWaiting');
                  window.location.reload();
                }
              }
            }
          };
        };
      }).catch(error => {
        console.error('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker:', error);
      });
    }
  </script>

  <div id="result">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞...</div>

  <script>
  const result = localStorage.getItem('quizResult');
  const total = localStorage.getItem('quizTotal');
  const resultEl = document.getElementById('result');

  if (result !== null && total !== null) {
    const score = parseInt(result); // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —á–∏—Å–ª–æ
    resultEl.textContent = `–¢—ã –Ω–∞–±—Ä–∞–ª ${score} –∏–∑ ${total} –±–∞–ª–ª–æ–≤`;

    // –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    if (score >= 8 && score <= 10) {
      resultEl.style.color = 'green'; // –û—Ç–ª–∏—á–Ω–æ
    } else if (score >= 5 && score <= 7) {
      resultEl.style.color = 'orange'; // –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ
    } else if (score < 5) {
      resultEl.style.color = 'red'; // –ü–ª–æ—Ö–æ
    } else {
      resultEl.style.color = 'black'; // –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π
    }
  } else {
    resultEl.textContent = '–†–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω';
    resultEl.style.color = 'gray';
  }

  // –û—á–∏—â–∞–µ–º –≤—Å—ë –ø–æ—Å–ª–µ –ø–æ–∫–∞–∑–∞
  localStorage.removeItem('quizResult');
  localStorage.removeItem('quizTotal');
  localStorage.removeItem('currentQuestions');
</script>

  <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('sw.js')
        .then(reg => {
          console.log('‚úÖ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:', reg.scope);

          reg.onupdatefound = () => {
            const newWorker = reg.installing;
            newWorker.onstatechange = () => {
              if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                alert("üöÄ –î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è! –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.");
              }
            };
          };
        })
        .catch(err => console.error('‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker:', err));
    });
  }
</script>
</body>
</html>
